<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bingo Junino - INRB</title>
    <link rel="icon" type="image/x-icon" href="favicon.png">
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <header>
            <img src="imagens/logo.svg" alt="Logo INRB" class="logo">
            <h1>Bingo Junino - INRB</h1>
            <div class="creditos">Criado por Erick Matheus - Formare 2025</div>
        </header>

        <main class="main-content">
            <div class="bingo-container">
                <div class="sorteio-area">
                    <div class="current-image" id="imagemSorteada">
                        <p>Clique em "Sortear" para comeÃ§ar!</p>
                    </div>
                    <button id="btnSortear" class="btn-sortear">Sortear Imagem</button>
                    <button id="btnBingo" class="btn-bingo">ðŸŽ‰ BINGO!</button>
                </div>

                <div class="right-panel">
                    <div class="historico">
                        <h2>Ãšltimos 3 Sorteados</h2>
                        <div id="listaSorteados" class="sorteados-grid"></div>
                    </div>

                    <div class="vencedores-box">
                        <h2>Vencedores</h2>
                        <div class="vencedores-list">
                            <div class="vencedor" id="vencedor1">1Âº LugarðŸ¥‡ - </div>
                            <div class="vencedor" id="vencedor2">2Âº LugarðŸ¥ˆ - </div>
                            <div class="vencedor" id="vencedor3">3Âº LugarðŸ¥‰ - </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Popup de Bingo -->
    <div id="bingoPopup" class="popup">
        <div class="popup-content">
            <span class="close-popup">&times;</span>
            <h2>Registrar Bingo</h2>
            <div class="form-group">
                <label for="vencedorNome">Nome do Vencedor:</label>
                <input type="text" id="vencedorNome" placeholder="Digite o nome">
            </div>
            <div class="form-group">
                <label for="pesquisaItem">Pesquisar Item:</label>
                <input type="text" id="pesquisaItem" placeholder="Digite para filtrar">
            </div>
            <div class="itens-sorteados-container">
                <h3>Itens Sorteados</h3>
                <div id="itensSorteadosLista" class="itens-sorteados-lista"></div>
            </div>
            <button id="confirmarBingo" class="btn-confirmar">Confirmar</button>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        // FunÃ§Ã£o para buscar dados do jsonbin.io
        async function fetchWinners() {
            try {
                const response = await fetch('https://api.jsonbin.io/v3/b/68523cc48561e97a5026386a/latest', {
                    headers: {
                        'X-Master-Key': '$2a$10$nGC0x4ZGIrrDOp.2XXhZ1.Fb9T2T.Fk05XB418S.9LZrzsdMvVHuS'
                    }
                });
                
                if (!response.ok) throw new Error('Erro ao buscar dados');
                
                const data = await response.json();
                const participantes = data.record.participantes || [];
                
                // Atualiza os vencedores na tela na ordem 3Âº, 2Âº, 1Âº
                if (participantes.length >= 1) {
                    document.getElementById('vencedor3').textContent = `3Âº LugarðŸ¥‰ ${participantes[participantes.length-1]}`;
                }
                if (participantes.length >= 2) {
                    document.getElementById('vencedor2').textContent = `2Âº LugarðŸ¥ˆ ${participantes[participantes.length-2]}`;
                }
                if (participantes.length >= 3) {
                    document.getElementById('vencedor1').textContent = `1Âº LugarðŸ¥‡ ${participantes[participantes.length-3]}`;
                }
            } catch (error) {
                console.error('Erro ao atualizar vencedores:', error);
            }
        }

        // Polling a cada 3 segundos
        setInterval(fetchWinners, 3000);
        
        // Busca inicial
        fetchWinners();
    </script>
    <div style="display:none;">
        <img src="imagens/milho.png">
        <img src="imagens/fogueira.png">
        <img src="imagens/balÃ£o.png">
        <img src="imagens/chapÃ©u.png">
        <img src="imagens/paÃ§oca.png">
        <img src="imagens/quentÃ£o.png">
        <img src="imagens/canjica.png">
        <img src="imagens/bandeirinha.png">
        <img src="imagens/sanfona.png">
        <img src="imagens/quadrilha.png">
        <img src="imagens/pÃ©-de-moleque.png">
        <img src="imagens/cuscuz.png">
        <img src="imagens/pinhÃ£o.png">
        <img src="imagens/bolo.png">
        <img src="imagens/cocada.png">
        <img src="imagens/curau.png">
        <img src="imagens/casal.png">
        <img src="imagens/pescaria.png">
        <img src="imagens/argola.png">
        <img src="imagens/corrida-de-saco.png">
        <img src="imagens/pau-de-sebo.png">
        <img src="imagens/tiro-ao-alvo.png">
        <img src="imagens/boca-do-palhaÃ§o.png">
        <img src="imagens/espantalho.png">
        <img src="imagens/tecido.png">
        <img src="imagens/arroz.png">
        <img src="imagens/maca-do-amor.png">
        <img src="imagens/pipoca.png">
        <img src="imagens/cachorro-quente.png">
        <img src="imagens/bingo.png">
    </div>
</body>
</html>